# Requirements: Eventstream

Total Requirements: 102

| Package Namespace | Requirements Type | Code | Requirement Statements | Files/Folders | Status | Notes on Status | Date Last Updated |
|-------------------|-------------------|------|------------------------|---------------|--------|-----------------|-------------------|
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7001 | Package MUST be framework-agnostic with no Laravel dependencies | packages/EventStream/composer.json; packages/EventStream/src/ |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7002 | All data structures defined via interfaces (EventInterface, StreamInterface, ProjectionInterface) | packages/EventStream/src/Contracts/EventInterface.php; packages/EventStream/src/Contracts/StreamInterface.php; packages/EventStream/src/Contracts/ProjectionInterface.php; packages/EventStream/src/Contracts/SnapshotInterface.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7003 | All persistence operations via EventStoreInterface repository contract | packages/EventStream/src/Contracts/EventStoreInterface.php; apps/Atomy/app/Repositories/DbEventStoreRepository.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7004 | Business logic in service layer (EventStreamManager, ProjectionEngine) | packages/EventStream/src/Services/EventStreamManager.php; packages/EventStream/src/Core/Engine/ProjectionEngine.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7005 | All database migrations in application layer (apps/Atomy) | apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php; apps/Atomy/database/migrations/2025_11_19_000002_create_event_snapshots_table.php; apps/Atomy/database/migrations/2025_11_19_000003_create_event_projections_table.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7006 | All Eloquent models in application layer implementing package interfaces | apps/Atomy/app/Models/EventStream.php (implements EventInterface); apps/Atomy/app/Models/EventSnapshot.php (implements SnapshotInterface); apps/Atomy/app/Models/EventProjection.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7007 | Package provides ONLY contracts - no concrete event store implementations | packages/EventStream/src/Contracts/; apps/Atomy/app/Repositories/DbEventStoreRepository.php (concrete implementation in Atomy) |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7008 | Support multiple event store backends via adapter pattern (SQL, MongoDB, EventStoreDB) | packages/EventStream/src/Contracts/EventStoreInterface.php; apps/Atomy/app/Repositories/DbEventStoreRepository.php (SQL adapter); apps/Atomy/app/Providers/EventStreamServiceProvider.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7009 | Use Value Objects for StreamId, EventId, EventVersion, AggregateId | packages/EventStream/src/ValueObjects/StreamId.php; packages/EventStream/src/ValueObjects/EventId.php; packages/EventStream/src/ValueObjects/EventVersion.php; packages/EventStream/src/ValueObjects/AggregateId.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7010 | Separate Core/ folder for internal engine (StreamProjector, SnapshotManager) | packages/EventStream/src/Core/Engine/ProjectionEngine.php; packages/EventStream/src/Core/Engine/SnapshotManager.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7011 | Define EventSerializerInterface for event payload serialization (JSON, Avro, Protobuf) | packages/EventStream/src/Contracts/EventSerializerInterface.php; packages/EventStream/src/Core/Engine/JsonEventSerializer.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7012 | MUST inject AuditLoggerInterface for meta-logging of event store operations | packages/EventStream/src/Services/EventStreamManager.php::__construct() (LoggerInterface injection); apps/Atomy/app/Providers/EventStreamServiceProvider.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7013 | MUST inject StorageInterface for snapshot archival | apps/Atomy/config/eventstream.php (archive configuration); packages/EventStream/src/Contracts/SnapshotRepositoryInterface.php |  |  |  |
| `Nexus\EventStream` | Architechtural Requirement | ARC-EVS-7014 | Support stream partitioning for high-volume event streams (> 10K events per aggregate) | apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (indexed for partitioning); apps/Atomy/config/eventstream.php (performance.batch_size) |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7101 | Event Sourcing RESERVED for critical domains requiring state replay: Finance (GL), Inventory (Stock) | packages/EventStream/README.md; apps/Atomy/config/eventstream.php (critical_domains) |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7102 | All other domains use standard AuditLogger for timeline/feed views | packages/EventStream/README.md (When NOT to Use section) |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7103 | Events are immutable - once appended to stream, cannot be modified or deleted | apps/Atomy/app/Models/EventStream.php::boot() (prevents updates/deletes); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7104 | Each event MUST contain: aggregate ID, event type, version, timestamp, payload | packages/EventStream/src/Contracts/EventInterface.php::getAggregateId(), getEventType(), getVersion(), getOccurredAt(), getPayload(); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7105 | Event streams MUST support optimistic concurrency control to prevent version conflicts | packages/EventStream/src/Contracts/EventStoreInterface.php::append() ($expectedVersion parameter); apps/Atomy/app/Repositories/DbEventStoreRepository.php::append(); packages/EventStream/src/Exceptions/ConcurrencyException.php |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7106 | Snapshots created periodically to optimize replay performance for long streams | packages/EventStream/src/Core/Engine/SnapshotManager.php::createIfNeeded(); apps/Atomy/config/eventstream.php (snapshot_threshold); apps/Atomy/database/migrations/2025_11_19_000002_create_event_snapshots_table.php |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7107 | Projections (read models) rebuilt from event streams on demand or via background jobs | packages/EventStream/src/Core/Engine/ProjectionEngine.php::run(), rebuild(); packages/EventStream/src/Contracts/ProjectorInterface.php; apps/Atomy/database/migrations/2025_11_19_000003_create_event_projections_table.php |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7108 | Support temporal queries: "What was the stock quantity of SKU-1234 on 2024-10-15?" | packages/EventStream/src/Services/EventStreamManager.php::getStateAt(); packages/EventStream/src/Contracts/StreamReaderInterface.php::readStreamUntil(); apps/Atomy/app/Repositories/DbStreamReaderRepository.php::readStreamUntil() |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7109 | Failed projections MUST be retryable without corrupting the event stream | packages/EventStream/src/Core/Engine/ProjectionEngine.php::run() (try-catch); packages/EventStream/src/Exceptions/ProjectionException.php; apps/Atomy/app/Models/EventProjection.php (tracks error_message, status) |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7110 | Small business: Optional Event Sourcing (use AuditLogger if replay not needed) | apps/Atomy/config/eventstream.php (enabled flag); packages/EventStream/README.md |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7111 | Medium business: Event Sourcing for Finance and Inventory with daily snapshots | apps/Atomy/config/eventstream.php (critical_domains.finance, critical_domains.inventory, snapshot_threshold) |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7112 | Large enterprise: Full Event Sourcing for Finance, Inventory, Payable, Receivable with hourly snapshots | apps/Atomy/config/eventstream.php (critical_domains.payable, critical_domains.receivable, snapshot_threshold); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (partitioning indexes) |  |  |  |
| `Nexus\EventStream` | Business Requirements | BUS-EVS-7113 | Support event versioning for schema evolution (EventV1, EventV2 with upcasters) | packages/EventStream/src/ValueObjects/EventVersion.php; packages/EventStream/src/Contracts/EventInterface.php::getVersion(); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (version column) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7201 | Define EventStoreInterface for appending events to streams | packages/EventStream/src/Contracts/EventStoreInterface.php::append(), appendBatch(); apps/Atomy/app/Repositories/DbEventStoreRepository.php |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7202 | Define StreamReaderInterface for reading event streams with filtering | packages/EventStream/src/Contracts/StreamReaderInterface.php; apps/Atomy/app/Repositories/DbStreamReaderRepository.php |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7203 | Define ProjectorInterface for rebuilding state from event streams | packages/EventStream/src/Contracts/ProjectorInterface.php::project(), reset(); packages/EventStream/src/Core/Engine/ProjectionEngine.php |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7204 | Define SnapshotRepositoryInterface for storing/retrieving aggregate snapshots | packages/EventStream/src/Contracts/SnapshotRepositoryInterface.php::save(), getLatest(), getAtVersion(); apps/Atomy/app/Repositories/DbSnapshotRepository.php |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7205 | Append events to stream with automatic version increment and concurrency check | apps/Atomy/app/Repositories/DbEventStoreRepository.php::append() (concurrency check); packages/EventStream/src/ValueObjects/EventVersion.php::next() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7206 | Read event stream by aggregate ID with optional version range filtering | packages/EventStream/src/Contracts/StreamReaderInterface.php::readStream(), readStreamFromVersion(); apps/Atomy/app/Repositories/DbStreamReaderRepository.php::readStreamFromVersion() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7207 | Read event stream by event type (e.g., all "StockReservedEvent" across all aggregates) | packages/EventStream/src/Contracts/StreamReaderInterface.php::readEventsByType(); apps/Atomy/app/Repositories/DbStreamReaderRepository.php::readEventsByType() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7208 | Replay event stream to rebuild aggregate state at specific point in time | packages/EventStream/src/Services/EventStreamManager.php::getStateAt(); packages/EventStream/src/Contracts/StreamReaderInterface.php::readStreamUntil() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7209 | Create snapshots automatically after N events (configurable threshold, default 100) | packages/EventStream/src/Core/Engine/SnapshotManager.php::createIfNeeded(); apps/Atomy/config/eventstream.php (snapshot_threshold); packages/EventStream/src/Services/EventStreamManager.php::createSnapshotIfNeeded() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7210 | Restore aggregate from latest snapshot + subsequent events for performance | packages/EventStream/src/Contracts/SnapshotRepositoryInterface.php::getLatest(); packages/EventStream/src/Contracts/StreamReaderInterface.php::readStreamFromVersion(); apps/Atomy/app/Repositories/DbSnapshotRepository.php::getLatest() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7211 | Support batch event appending for transaction consistency | packages/EventStream/src/Contracts/EventStoreInterface.php::appendBatch(); apps/Atomy/app/Repositories/DbEventStoreRepository.php::appendBatch() (DB::transaction) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7212 | Generate unique EventId (ULID) for each event with monotonic timestamp | packages/EventStream/src/ValueObjects/EventId.php::generate() (uses Symfony ULID); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (event_id column) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7213 | Track event metadata: causation ID (triggering event), correlation ID (distributed trace) | packages/EventStream/src/Contracts/EventInterface.php::getCausationId(), getCorrelationId(); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (causation_id, correlation_id columns) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7214 | Support event enrichment with tenant context, user context, and timestamp | packages/EventStream/src/Contracts/EventInterface.php::getTenantId(), getUserId(), getOccurredAt(), getMetadata(); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (tenant_id, user_id, occurred_at, metadata columns) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7215 | Provide projection engine for building read models from event streams | packages/EventStream/src/Core/Engine/ProjectionEngine.php::run(), rebuild(); packages/EventStream/src/Contracts/ProjectorInterface.php; apps/Atomy/database/migrations/2025_11_19_000003_create_event_projections_table.php |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7216 | Support multiple projections per stream (e.g., "CurrentStockProjection", "StockHistoryProjection") | packages/EventStream/src/Contracts/ProjectorInterface.php::getName(), getHandledEventTypes(); packages/EventStream/src/Core/Engine/ProjectionEngine.php; apps/Atomy/database/migrations/2025_11_19_000003_create_event_projections_table.php (projector_name column) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7217 | Rebuild projections from scratch by replaying entire stream | packages/EventStream/src/Core/Engine/ProjectionEngine.php::rebuild(); packages/EventStream/src/Contracts/ProjectorInterface.php::reset(); packages/EventStream/src/Services/EventStreamManager.php::rebuildProjection() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7218 | Resume projection from last processed event on failure/restart | packages/EventStream/src/Contracts/ProjectorInterface.php::getLastProcessedEventId(), setLastProcessedEventId(); packages/EventStream/src/Core/Engine/ProjectionEngine.php::run(); apps/Atomy/app/Models/EventProjection.php (last_processed_event_id column) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7219 | Support subscription to event streams for real-time projection updates | packages/EventStream/src/Core/Engine/ProjectionEngine.php::run(); apps/Atomy/config/eventstream.php (projections.enabled) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7220 | Generate event notifications for external consumers (e.g., analytics, reporting) | apps/Atomy/config/eventstream.php; packages/EventStream/src/Contracts/EventStoreInterface.php |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7221 | Support upcasting for event schema migration (EventV1 â†’ EventV2) | packages/EventStream/src/ValueObjects/EventVersion.php; packages/EventStream/src/Contracts/EventSerializerInterface.php; apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (version, event_type columns) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7222 | Provide temporal query API: getStateAt(aggregateId, timestamp) | packages/EventStream/src/Services/EventStreamManager.php::getStateAt(); packages/EventStream/src/Contracts/StreamReaderInterface.php::readStreamUntil(); apps/Atomy/app/Repositories/DbStreamReaderRepository.php::readStreamUntil() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7223 | Small business: Optional Event Sourcing with basic replay capability | apps/Atomy/config/eventstream.php (enabled flag); packages/EventStream/src/Services/EventStreamManager.php::getStateAt() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7224 | Medium business: Event Sourcing for critical domains with snapshot support | apps/Atomy/config/eventstream.php (critical_domains, snapshot_threshold); packages/EventStream/src/Core/Engine/SnapshotManager.php |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7225 | Large enterprise: Advanced Event Sourcing with partitioning, upcasting, and multi-projection support | apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (partitioning indexes); apps/Atomy/config/eventstream.php (performance.batch_size); packages/EventStream/src/Core/Engine/ProjectionEngine.php |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7226 | Archive old events to cold storage after N days (configurable, default 365) | apps/Atomy/config/eventstream.php (archive.retention_days, archive.storage_disk); packages/EventStream/src/Contracts/SnapshotRepositoryInterface.php::deleteOlderThan() |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7227 | Support event stream compaction by replacing old events with snapshots | packages/EventStream/src/Core/Engine/SnapshotManager.php; packages/EventStream/src/Contracts/SnapshotRepositoryInterface.php::save(); apps/Atomy/config/eventstream.php (snapshot_threshold) |  |  |  |
| `Nexus\EventStream` | Functional Requirement | FUN-EVS-7228 | Provide event stream health monitoring: stream size, event count, projection lag | packages/EventStream/src/Services/EventStreamManager.php::getStreamHealth(); apps/Atomy/app/Models/EventProjection.php (processed_count, last_processed_at columns); apps/Atomy/config/eventstream.php (projections.lag_threshold_seconds) |  |  |  |
| `Nexus\EventStream` | Performance Requirement | PER-EVS-7301 | Event append < 50ms (p95) with database transaction | apps/Atomy/app/Repositories/DbEventStoreRepository.php::append(), appendBatch(); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (indexes) |  |  |  |
| `Nexus\EventStream` | Performance Requirement | PER-EVS-7302 | Stream read < 100ms for 1000 events from database | apps/Atomy/app/Repositories/DbStreamReaderRepository.php::readStream(), readStreamFromVersion(); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (indexes on aggregate_id, version) |  |  |  |
| `Nexus\EventStream` | Performance Requirement | PER-EVS-7303 | Snapshot restoration < 10ms (in-memory cache) | packages/EventStream/src/Core/Engine/SnapshotManager.php::loadSnapshot(); apps/Atomy/app/Repositories/DbSnapshotRepository.php::getLatest(); apps/Atomy/config/eventstream.php (performance.snapshot_cache_ttl) |  |  |  |
| `Nexus\EventStream` | Performance Requirement | PER-EVS-7304 | Replay 10K events < 5s for aggregate state reconstruction | packages/EventStream/src/Services/EventStreamManager.php::getStateAt(); packages/EventStream/src/Core/Engine/ProjectionEngine.php::rebuild(); apps/Atomy/config/eventstream.php (performance.batch_size) |  |  |  |
| `Nexus\EventStream` | Performance Requirement | PER-EVS-7305 | Projection update < 200ms per event (real-time subscription) | packages/EventStream/src/Core/Engine/ProjectionEngine.php::run(); packages/EventStream/src/Contracts/ProjectorInterface.php::project(); apps/Atomy/config/eventstream.php (performance.batch_size) |  |  |  |
| `Nexus\EventStream` | Performance Requirement | PER-EVS-7306 | Temporal query (getStateAt) < 3s for aggregates with < 10K events | packages/EventStream/src/Services/EventStreamManager.php::getStateAt(); packages/EventStream/src/Contracts/StreamReaderInterface.php::readStreamUntil(); apps/Atomy/app/Repositories/DbStreamReaderRepository.php::readStreamUntil() |  |  |  |
| `Nexus\EventStream` | Performance Requirement | PER-EVS-7307 | Small business: Support 10K events/day with < 100ms append time | apps/Atomy/app/Repositories/DbEventStoreRepository.php::append(); apps/Atomy/config/eventstream.php; apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (indexes) |  |  |  |
| `Nexus\EventStream` | Performance Requirement | PER-EVS-7308 | Medium business: Support 100K events/day with snapshot optimization | apps/Atomy/config/eventstream.php (snapshot_threshold 100); packages/EventStream/src/Core/Engine/SnapshotManager.php::createIfNeeded(); apps/Atomy/app/Repositories/DbSnapshotRepository.php |  |  |  |
| `Nexus\EventStream` | Performance Requirement | PER-EVS-7309 | Large enterprise: Support 1M+ events/day with partitioning and parallel projection | apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (partitioning indexes); apps/Atomy/config/eventstream.php (backend, projections.enabled); packages/EventStream/src/Core/Engine/ProjectionEngine.php |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7401 | Event appending uses database transactions (ACID compliance) | apps/Atomy/app/Repositories/DbEventStoreRepository.php::append(), appendBatch() (DB::transaction); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7402 | Optimistic concurrency control prevents lost updates (version conflict detection) | apps/Atomy/app/Repositories/DbEventStoreRepository.php::append() (version checking); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (unique index aggregate_id+version); packages/EventStream/src/Exceptions/ConcurrencyException.php |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7403 | Failed event append throws ConcurrencyException with retry guidance | packages/EventStream/src/Exceptions/ConcurrencyException.php (holds expectedVersion, actualVersion); apps/Atomy/app/Repositories/DbEventStoreRepository.php::append() |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7404 | Projection failures logged without corrupting event stream | packages/EventStream/src/Core/Engine/ProjectionEngine.php::run() (try-catch with logging); apps/Atomy/app/Models/EventProjection.php (status, error_message columns); packages/EventStream/src/Exceptions/ProjectionException.php |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7405 | Support idempotent event appending (duplicate event detection via EventId) | apps/Atomy/app/Repositories/DbEventStoreRepository.php::append() (duplicate key catch); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (primary key event_id); packages/EventStream/src/ValueObjects/EventId.php |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7406 | Snapshots validated before use (checksum verification) | packages/EventStream/src/Core/Engine/SnapshotManager.php::validateSnapshot(); apps/Atomy/app/Models/EventSnapshot.php (checksum column); packages/EventStream/src/Exceptions/InvalidSnapshotException.php |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7407 | Corrupted snapshots trigger automatic stream replay | packages/EventStream/src/Core/Engine/SnapshotManager.php::loadSnapshot() (checksum validation); packages/EventStream/src/Services/EventStreamManager.php::getStateAt() (fallback to replay) |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7408 | Support point-in-time recovery by replaying events from backup | packages/EventStream/src/Services/EventStreamManager.php::getStateAt(); packages/EventStream/src/Contracts/StreamReaderInterface.php::readStreamUntil(); apps/Atomy/config/eventstream.php (archive configuration) |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7409 | Archive event streams to immutable storage (S3, Azure Blob) for disaster recovery | apps/Atomy/config/eventstream.php (archive.storage_disk, archive.retention_days); packages/EventStream/src/Contracts/EventStoreInterface.php |  |  |  |
| `Nexus\EventStream` | Reliability Requirement | REL-EVS-7410 | Projection lag monitoring with alerting for delayed projections | packages/EventStream/src/Services/EventStreamManager.php::getStreamHealth(); apps/Atomy/app/Models/EventProjection.php (last_processed_at, processed_count); apps/Atomy/config/eventstream.php (projections.lag_threshold_seconds) |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7501 | Immutable event streams - events cannot be modified or deleted (append-only) | apps/Atomy/app/Models/EventStream.php::boot() (prevents updates/deletes); apps/Atomy/app/Repositories/DbEventStoreRepository.php (only insert operations); packages/EventStream/src/Contracts/EventStoreInterface.php (no update/delete methods) |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7502 | Enforce tenant isolation for all event streams | apps/Atomy/app/Repositories/DbEventStoreRepository.php (tenant_id scoping in all queries); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (tenant_id column, indexes); apps/Atomy/app/Providers/EventStreamServiceProvider.php (TenantContextInterface injection) |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7503 | Encrypt event payloads at rest and in transit | apps/Atomy/config/eventstream.php (encryption configuration); apps/Atomy/database/migrations/2025_11_19_000001_create_event_streams_table.php (payload stored as JSON/encrypted); packages/EventStream/src/Contracts/EventSerializerInterface.php |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7504 | Support RBAC for event stream access (read, write, replay) | apps/Atomy/config/eventstream.php (authorization configuration); apps/Atomy/app/Repositories/DbEventStoreRepository.php (authorization checks) |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7505 | Audit all event store operations via AuditLogger (meta-auditing) | apps/Atomy/app/Repositories/DbEventStoreRepository.php (AuditLogger integration); packages/EventStream/src/Services/EventStreamManager.php (audit logging) |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7506 | Mask sensitive data in event payloads (credit cards, SSNs, passwords) | packages/EventStream/src/Core/Engine/JsonEventSerializer.php (sensitive data masking); apps/Atomy/config/eventstream.php (masked_fields configuration) |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7507 | Support event stream tampering detection via cryptographic hashing | apps/Atomy/app/Models/EventSnapshot.php (checksum column); packages/EventStream/src/Core/Engine/SnapshotManager.php::calculateChecksum(), validateSnapshot() |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7508 | Implement event stream access logging for compliance audits | apps/Atomy/app/Repositories/DbEventStoreRepository.php (AuditLogger calls); packages/EventStream/src/Services/EventStreamManager.php (access logging) |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7509 | Support GDPR right-to-erasure with event stream anonymization (not deletion) | packages/EventStream/src/Services/EventStreamManager.php (anonymization methods); apps/Atomy/config/eventstream.php (gdpr configuration) |  |  |  |
| `Nexus\EventStream` | Security and Compliance Requirement | SEC-EVS-7510 | Comply with SOX requirements for immutable financial event trails | apps/Atomy/app/Models/EventStream.php::boot() (immutability enforcement); apps/Atomy/config/eventstream.php (critical_domains.finance); packages/EventStream/README.md (compliance documentation) |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7601 | Expose EventStoreInterface for consumption by Nexus\Finance (GL events) | packages/EventStream/src/Contracts/EventStoreInterface.php; apps/Atomy/app/Providers/EventStreamServiceProvider.php (interface binding); apps/Atomy/config/eventstream.php (critical_domains.finance true) |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7602 | Expose EventStoreInterface for consumption by Nexus\Inventory (stock events) | packages/EventStream/src/Contracts/EventStoreInterface.php; apps/Atomy/app/Providers/EventStreamServiceProvider.php (interface binding); apps/Atomy/config/eventstream.php (critical_domains.inventory true) |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7603 | Optional integration with Nexus\Payable for AP event streams (large enterprise only) | packages/EventStream/src/Contracts/EventStoreInterface.php; apps/Atomy/config/eventstream.php (critical_domains.payable false by default) |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7604 | Optional integration with Nexus\Receivable for AR event streams (large enterprise only) | packages/EventStream/src/Contracts/EventStoreInterface.php; apps/Atomy/config/eventstream.php (critical_domains.receivable false by default) |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7605 | MUST integrate with Nexus\AuditLogger for event store operation audit trails | apps/Atomy/app/Repositories/DbEventStoreRepository.php (AuditLogger injection and calls); packages/EventStream/src/Services/EventStreamManager.php (audit logging); apps/Atomy/app/Providers/EventStreamServiceProvider.php |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7606 | MUST integrate with Nexus\Storage for snapshot and archive storage | apps/Atomy/config/eventstream.php (archive.storage_disk); apps/Atomy/app/Repositories/DbSnapshotRepository.php (Storage integration) |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7607 | MUST integrate with Nexus\Notifier for projection failure alerts | packages/EventStream/src/Core/Engine/ProjectionEngine.php (Notifier integration for failures); apps/Atomy/config/eventstream.php (projections.failure_notification) |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7608 | Support webhook notifications for new events in stream | apps/Atomy/config/eventstream.php (webhook configuration); apps/Atomy/app/Repositories/DbEventStoreRepository.php (webhook triggering) |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7609 | Provide REST API for event stream query and temporal queries | packages/EventStream/src/Services/EventStreamManager.php (public API methods); packages/EventStream/src/Contracts/StreamReaderInterface.php |  |  |  |
| `Nexus\EventStream` | Integration Requirement | INT-EVS-7610 | Support GraphQL subscriptions for real-time event stream monitoring | packages/EventStream/src/Contracts/EventStoreInterface.php; apps/Atomy/config/eventstream.php (subscriptions configuration) |  |  |  |
| `Nexus\EventStream` | Usability Requirement | USA-EVS-7701 | Provide event stream visualization showing aggregate timeline | packages/EventStream/src/Services/EventStreamManager.php::getStreamHealth(); packages/EventStream/src/Contracts/StreamReaderInterface.php::readStream() |  |  |  |
| `Nexus\EventStream` | Usability Requirement | USA-EVS-7702 | Display projection status dashboard (last processed event, lag, errors) | apps/Atomy/app/Models/EventProjection.php (status, last_processed_event_id, error_message); packages/EventStream/src/Services/EventStreamManager.php::getStreamHealth() |  |  |  |
| `Nexus\EventStream` | Usability Requirement | USA-EVS-7703 | Support temporal query UI for "time travel" state inspection | packages/EventStream/src/Services/EventStreamManager.php::getStateAt(); packages/EventStream/src/Contracts/StreamReaderInterface.php::readStreamUntil() |  |  |  |
| `Nexus\EventStream` | Usability Requirement | USA-EVS-7704 | Show snapshot creation history and storage usage | apps/Atomy/app/Models/EventSnapshot.php (created_at, data_size); apps/Atomy/app/Repositories/DbSnapshotRepository.php; apps/Atomy/config/eventstream.php (snapshot configuration) |  |  |  |
| `Nexus\EventStream` | Usability Requirement | USA-EVS-7705 | Provide event replay simulator for testing projections | packages/EventStream/src/Core/Engine/ProjectionEngine.php::rebuild(); packages/EventStream/src/Services/EventStreamManager.php::rebuildProjection(); packages/EventStream/src/Contracts/ProjectorInterface.php::reset() |  |  |  |
| `Nexus\EventStream` | Usability Requirement | USA-EVS-7706 | Display concurrency conflict warnings with resolution guidance | packages/EventStream/src/Exceptions/ConcurrencyException.php (holds expectedVersion, actualVersion, aggregateId); apps/Atomy/app/Repositories/DbEventStoreRepository.php::append() |  |  |  |
| `Nexus\EventStream` | Usability Requirement | USA-EVS-7707 | Show event stream health metrics (throughput, size, version distribution) | packages/EventStream/src/Services/EventStreamManager.php::getStreamHealth(); apps/Atomy/app/Models/EventProjection.php (processed_count, last_processed_at); apps/Atomy/config/eventstream.php |  |  |  |
| `Nexus\EventStream` | Usability Requirement | USA-EVS-7708 | Support event payload inspection with pretty-printed JSON/YAML | packages/EventStream/src/Core/Engine/JsonEventSerializer.php::serialize(), deserialize(); apps/Atomy/app/Models/EventStream.php (payload column JSON type) |  |  |  |
